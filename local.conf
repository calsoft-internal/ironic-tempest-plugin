[[local|localrc]]
IRONIC_HW_ARCH=x86_64
IRONIC_HW_NODE_CPU=4
IRONIC_HW_NODE_RAM=8192
IRONIC_HW_NODE_DISK=40
ALLOCATION_POOL="start=192.168.120.20,end=192.168.120.40"
HOST_IP=192.168.120.58
disable_service n-net n-novnc q-l3 horizon
enable_service q-svc q-agt q-dhcp q-meta
enable_service neutron
Q_USE_DEBUG_COMMAND=True
NETWORK_GATEWAY=192.168.120.1
#DEST=/opt/stack/new
DATA_DIR=/opt/stack/data
ACTIVE_TIMEOUT=90
BOOT_TIMEOUT=90
ASSOCIATE_TIMEOUT=60
TERMINATE_TIMEOUT=60
MYSQL_PASSWORD=secretmysql
DATABASE_PASSWORD=secretdatabase
RABBIT_PASSWORD=secretrabbit
ADMIN_PASSWORD=secretadmin
SERVICE_PASSWORD=secretservice
SERVICE_TOKEN=111222333444
SWIFT_HASH=1234123412341234
ROOTSLEEP=0
ERROR_ON_CLONE=False
NOVNC_FROM_PACKAGE=True

SKIP_EXERCISES=boot_from_volume,bundle,client-env,euca
SYSLOG=False
#SCREEN_LOGDIR=/opt/stack/new/screen-logs
VERBOSE=True
IPV4_ADDRS_SAFE_TO_USE=192.168.120.0/24
#FLOATING_RANGE=192.168.191.0/24
FLOATING_RANGE=100.67.157.64/26

PUBLIC_NETWORK_GATEWAY=192.168.191.1

FIXED_NETWORK_SIZE=256
VIRT_DRIVER=ironic
SWIFT_REPLICAS=1
SWIFT_START_ALL_SERVICES=False
LOG_COLOR=False
UNDO_REQUIREMENTS=False
CINDER_PERIODIC_INTERVAL=10
export OS_NO_CACHE=True
LIBS_FROM_GIT=sushy
EBTABLES_RACE_FIX=True
DEBUG_LIBVIRT_COREDUMPS=True
CINDER_VOLUME_CLEAR=none
LOGDIR=$HOME/logs
IRONIC_VM_LOG_DIR=/opt/stack/logs/ironic-bm-logs
BUILD_TIMEOUT=1200
IRONIC_CALLBACK_TIMEOUT=600
Q_AGENT=openvswitch
Q_ML2_TENANT_NETWORK_TYPE=vxlan
#############
Q_ML2_PLUGIN_MECHANISM_DRIVERS=openvswitch,linuxbridge
ML2_L3_PLUGIN=router
#############
IRONIC_ENABLED_DRIVERS=fake,pxe_ipmitool,idrac
IRONIC_VM_EPHEMERAL_DISK=1
VOLUME_BACKING_FILE_SIZE=24G
FORCE_CONFIG_DRIVE=False




IRONIC_VM_SPECS_RAM=1024

enable_plugin ironic https://opendev.org/openstack/ironic stable/yoga
enable_plugin ironic-inspector https://opendev.org/openstack/ironic-inspector.git stable/yoga

#enable_plugin ironic https://opendev.org/openstack/ironic
#enable_plugin ironic-inspector https://opendev.org/openstack/ironic-inspector.git

IRONIC_AUTOMATED_CLEAN_ENABLED=False

disable_service n-net n-novnc q-l3 horizon
enable_service s-proxy s-object s-container s-account
enable_service ironic ir-api ir-cond neutron
PUBLIC_INTERFACE=ens224
Q_USE_PROVIDER_NETWORKING=True
OVS_PHYSICAL_BRIDGE=br-ironic
PHYSICAL_NETWORK=private
PROVIDER_NETWORK_TYPE="flat"
FIXED_RANGE=192.168.120.0/24
Q_L3_ENABLED=False
ENABLE_ISOLATED_METADATA=True
IP_VERSION=4
Q_USE_SECGROUP=False
USE_SUBNETPOOL=False
IRONIC_VM_COUNT=0
IRONIC_DEPLOY_DRIVER_ISCSI_WITH_IPA=True
IRONIC_IPXE_ENABLED=True
IRONIC_RAMDISK_TYPE=dib
IRONIC_BUILD_DEPLOY_RAMDISK=False

IRONIC_INSPECTOR_INTERFACE=br-ironic




# IRONIC_AGENT_KERNEL_URL=https://tarballs.openstack.org/ironic-python-agent/coreos/files/coreos_production_pxe-master.vmlinuz
# IRONIC_AGENT_RAMDISK_URL=https://tarballs.openstack.org/ironic-python-agent/coreos/files/coreos_production_pxe_image-oem-master.cpio.gz




IRONIC_AGENT_KERNEL_URL=https://tarballs.opendev.org/openstack/ironic-python-agent/dib/files/ipa-centos8-master.kernel
IRONIC_AGENT_RAMDISK_URL=https://tarballs.opendev.org/openstack/ironic-python-agent/dib/files/ipa-centos8-master.initramfs

IRONIC_IS_HARDWARE=True
IRONIC_BAREMETAL_BASIC_OPS=True
IRONIC_HWINFO_FILE=/opt/stack/devstack/files/hardware_info
DEFAULT_INSTANCE_TYPE=baremetal
DEBUG=True
IRONIC_CONF=/etc/ironic/ironic.conf
IRONIC_BOOT_MODE=uefi


#IRONIC_DEPLOY_DRIVER=redfish

#IRONIC_ENABLED_POWER_INTERFACES=redfish,ipmitool,fake
#IRONIC_ENABLED_MANAGEMENT_INTERFACES=redfish,ipmitool,noop,fake
#IRONIC_ENABLED_INSPECT_INTERFACES=redfish,no-inspect,inspector
#IRONIC_ENABLED_RAID_INTERFACES=no-raid
#IRONIC_ENABLED_VENDOR_INTERFACES=ipmitool,no-vendor
IRONIC_ENABLED_BOOT_INTERFACES=fake,ipxe,pxe
#IRONIC_ENABLED_HARDWARE_TYPES=redfish

IRONIC_DEPLOY_DRIVER=idrac

IRONIC_ENABLED_POWER_INTERFACES=idrac-wsman
IRONIC_ENABLED_MANAGEMENT_INTERFACES=idrac-wsman
IRONIC_ENABLED_INSPECT_INTERFACES=idrac-wsman
IRONIC_ENABLED_RAID_INTERFACES=idrac-wsman
IRONIC_ENABLED_VENDOR_INTERFACES=idrac-wsman

IRONIC_ENABLED_HARDWARE_TYPES=idrac

IRONIC_ENABLED_DEPLOY_INTERFACES=direct
IRONIC_ENABLED_NETWORK_INTERFACES=flat,noop
IRONIC_API_VERSION=latest
USE_PYTHON3=True
# PYTHON3_VERSION=3.6

DOWNLOAD_DEFAULT_IMAGES=False
#IMAGE_URLS=file:///opt/stack/x-overcloud/overcloud-full.tar.gz

[[post-config|/etc/ironic/ironic.conf]]
[conductor]
force_power_state_during_sync=false
[pxe]
pxe_append_params = nofb nomodeset systemd.journald.forward_to_console=yes
[redfish]
kernel_append_params = nofb nomodeset systemd.journald.forward_to_console=yes

enable_service tempest
FORCE_CONFIG_DRIVE=True
ENABLED_SERVICES=tempest
TEMPEST_SSH_CONNECT_METHOD=fixed
INSTALL_TEMPEST=False
TEMPEST_PLUGINS=/opt/stack/ironic-tempest-plugin
 
[[post-extra|$TEMPEST_CONFIG]]
[baremetal]
unprovision_timeout=1800
deploywait_timeout=1800
active_timeout=600
ssh_connect_method=fixed
run_validation=false
[validation]
ssh_timeout=1800
run_validation=false
